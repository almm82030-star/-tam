<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>تم - لوحة التحكم</title>
<style>
body{font-family:"Tajawal",sans-serif;background:#111;color:white;margin:0;padding:20px;text-align:center;}
.card{background:#1c1c1c;padding:20px;margin:20px auto;border-radius:14px;max-width:900px;box-shadow:0 0 20px #000;}
input,button{width:100%;padding:12px;margin-top:8px;border-radius:10px;border:none;font-size:16px;}
button{background:#0d6efd;color:white;cursor:pointer;}
table{width:100%;border-collapse:collapse;margin-top:12px;}
th,td{border:1px solid #555;padding:6px;text-align:center;}
</style>
</head>
<body>

<div id="loginBox" class="card">
<h3>تسجيل دخول لوحة التحكم</h3>
<input id="user" placeholder="اسم المستخدم">
<input id="pass" type="password" placeholder="كلمة المرور">
<button onclick="login()">دخول</button>
</div>

<div id="admin" class="card" style="display:none">
<h3>جميع الطلبات</h3>
<table>
<thead><tr><th>من</th><th>إلى</th><th>المسافة (كم)</th><th>استهلاك (لتر)</th><th>التكلفة (ريال)</th><th>السيارة</th><th>الوقود</th><th>الوقت</th></tr></thead>
<tbody id="tblReq"></tbody>
</table>
<button onclick="logout()">تسجيل خروج</button>
</div>

<script src="https://www.gstatic.com/firebasejs/11.1.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/11.1.0/firebase-database.js"></script>

<script>
const firebaseConfig = {
apiKey: "AIzaSyBkOM7eSnUJ0B_3Mx4wVyh-lTvFEAhxWas",
authDomain: "tama-6219c.firebaseapp.com",
databaseURL: "https://tama-6219c-default-rtdb.firebaseio.com",
projectId: "tama-6219c",
storageBucket: "tama-6219c.appspot.com",
messagingSenderId: "285162278384",
appId: "1:285162278384:web:8264d5439564660b616135"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();

function login(){
let u=document.getElementById("user").value;
let p=document.getElementById("pass").value;
if(u==="petroapp" && p==="212775"){
document.getElementById("loginBox").style.display="none";
document.getElementById("admin").style.display="block";
loadRequests();
}else{alert("❌ اسم المستخدم أو كلمة المرور خاطئة")}
}
function logout(){
document.getElementById("loginBox").style.display="block";
document.getElementById("admin").style.display="none";
}

function loadRequests(){
let tbl=document.getElementById("tblReq");
tbl.innerHTML="";
db.ref("requests").once("value",snapshot=>{
snapshot.forEach(s=>{
let r=s.val();
let tr=document.createElement("tr");
tr.innerHTML=`<td>${r.from}</td><td>${r.to}</td><td>${r.km.toFixed(1)}</td><td>${r.liters.toFixed(2)}</td><td>${r.cost.toFixed(2)}</td><td>${r.car}</td><td>${r.fuel}</td><td>${r.time}</td>`;
tbl.appendChild(tr);
});
});
}
</script>
</body>
</html>

